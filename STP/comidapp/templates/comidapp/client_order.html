{% extends 'template.html' %}

{% block title %}Pedido Confirmado{% endblock %}

{% block content %}
    <div class="container text-center">
        <h2><strong>PEDIDO REALIZADO <em>CON ÉXITO!!!</em></strong></h2>
        <p>Estamos cocinando su orden...</p>
        <p>ID del pedido: <strong>{{ pedido.id }}</strong></p>
        <img src="https://media.tenor.com/pJaEbhfzhAUAAAAj/club-penguiin-pizza.gif" alt="Cocinando" width="150">
        
        {% for item in platos_con_cantidad %}
        
        
        <div class="card" >
            <div class="row g-0">
                <div class="col-3">
                    <h1>Placeholder No IMG</h1>
                </div>
                <div class="col-5">
                    <div class="text-left card-body">
                        <h5 class="card-title">{{ item.plato.name }}</h5>
                        <p class="card-text">
                            Precio unitario: ${{ item.plato.precio }}
                        </p>
                        <p class="card-text">
                            Cantidad: {{ item.cantidad }}   
                        </p>
                    </div>
                </div>
                <div>
                    <button class="btn-sm mt-2" type="button" data-bs-toggle="collapse" data-bs-target="#resena-form-{{ item.plato.id }}" aria-expanded="false" aria-controls="resena-form-{{ item.plato.id }}">
                        Reseñar
                    </button>
                </div>
            </div>
        </div>

    <!-- Botón para mostrar/ocultar el formulario -->

        

    <!-- Formulario oculto por defecto -->
    
        <div class="collapse" id="resena-form-{{ item.plato.id }}">
            <h5>Deja tu reseña para {{ item.plato.name }}</h5>
            <form method="POST" action="{% url 'client_order' %}">
                {% csrf_token %}
                <input type="hidden" name="plato_id" value="{{ item.plato.id }}">
            <div class="mb-2">
                    {{ form.texto.label_tag }}
                    {{ form.texto }}
                </div>
                <div class="mb-3">
                    {{ form.puntuacion.label_tag }}
                    {{ form.puntuacion }}
                </div>

                            <button type="submit" class="btn btn-sm">Enviar Reseña</button>
                        </form>
                    </div>

                {% endfor %}

            <hr>
            <div class="text-end">
                Total del pedido: ${{ total_pedido }}
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
